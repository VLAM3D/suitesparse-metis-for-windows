PROJECT(GPUQREngine)

include_directories("${suitesparseconfig_SOURCE_DIR}")
INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/Include")
INCLUDE_DIRECTORIES(${SuiteSparse_GPURuntime_INCLUDE})
FILE(GLOB LIBHDRS "Include/*.h")
FILE(GLOB_RECURSE LIBSRCS "Source/*.cpp" "Source/*.cu" "Include/*.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Apply/block_apply.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Apply/block_apply_chunk.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Apply/pipelined_rearrange.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Apply/pipelined_rearrange.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Apply/cevta_tile.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Assemble/packAssemble.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Assemble/sAssemble.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/Factorize/factorize_vt.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/qrKernel.cu")
list(REMOVE_ITEM LIBSRCS "${CMAKE_CURRENT_LIST_DIR}/Include/Kernel/uberKernel.cu")

CUDA_ADD_LIBRARY(GPUQREngine ${LIBHDRS} ${LIBSRCS})
#declare_suitesparse_library(GPUQREngine "${LIBSRCS}" "${LIBHDRS}")
SET(SuiteSparse_GPUQREngine_INCLUDE "${CMAKE_CURRENT_SOURCE_DIR}/Include" PARENT_SCOPE)